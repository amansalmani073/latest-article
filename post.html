<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Travel Blog | Global Travel Guide</title>

<meta name="description" content="">
<meta name="robots" content="index, follow">

<link rel="canonical" id="canonicalTag" href="">

<meta property="og:title" id="ogTitle" content="">
<meta property="og:description" id="ogDesc" content="">
<meta property="og:type" content="article">
<meta property="og:url" id="ogUrl" content="">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{font-family:'Poppins',sans-serif;line-height:1.8;color:#444;margin:0;background:#f9f9f9;}
.nav{background:white;padding:15px 8%;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
.container{max-width:800px;margin:40px auto;background:white;padding:40px;border-radius:15px;}
h1{color:#1a1a1a;font-size:32px;margin-bottom:10px;}
.meta{font-size:14px;color:#888;border-bottom:1px solid #eee;padding-bottom:20px;margin-bottom:30px;}
.content img {
width:100% !important;
height:auto !important;
max-width:100%;
display:block;
margin:20px auto;
border-radius:10px;
}
  .content p {
text-align:justify;
}
</style>
</head>

<body>

<div class="nav">
<a href="/latest-article/" style="text-decoration:none;font-weight:bold;color:#ff5722;">‚Üê Back to Home</a>
</div>

<div class="container" id="full-post">
<p style="text-align:center;">Loading your travel story...</p>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

const firebaseConfig = {
apiKey:"AIzaSyCBSTMljE8h9sa1IldRcuKbaKp84t5hx9s",
authDomain:"latest-article.firebaseapp.com",
projectId:"latest-article",
appId:"1:222132959003:web:a329d719efb6cf7c105be"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

const urlParams=new URLSearchParams(window.location.search);
const postSlug=urlParams.get('slug');

async function loadPost(){
if(!postSlug){
document.getElementById('full-post').innerHTML="Post not found.";
return;
}

const q=query(
collection(db,"user_blogs"),
where("slug","==",postSlug)
);

const querySnapshot=await getDocs(q);

if(!querySnapshot.empty){

querySnapshot.forEach((doc)=>{
const data=doc.data();

let textContent=data.metaDesc || data.content.replace(/<[^>]*>?/gm,'').substring(0,160);

document.title=data.title+" | Global Travel Guide";
document.querySelector("meta[name='description']").setAttribute("content",textContent);

document.getElementById("canonicalTag").href=window.location.href;
document.getElementById("ogTitle").content=data.title;
document.getElementById("ogDesc").content=textContent;
document.getElementById("ogUrl").content=window.location.href;

document.getElementById('full-post').innerHTML=`
<span style="color:#ff5722;font-weight:bold;text-transform:uppercase;font-size:12px;">
${data.category?data.category.replace('-',' '):'Travel Story'}
</span>

<h1>${data.title}</h1>

<div class="meta">
By <b>${data.author}</b> |
Published on ${new Date().toLocaleDateString()}
</div>

<div class="content">${data.content}</div>
`;

let schema={
"@context":"https://schema.org",
"@type":"BlogPosting",
"headline":data.title,
"description":textContent,
"author":{"@type":"Person","name":data.author},
"datePublished":new Date().toISOString(),
"mainEntityOfPage":{"@type":"WebPage","@id":window.location.href}
};

let script=document.createElement('script');
script.type='application/ld+json';
script.text=JSON.stringify(schema);
document.head.appendChild(script);

});

}else{
document.getElementById('full-post').innerHTML="Post not found.";
}
}
loadPost();
</script>

</body>
</html>
