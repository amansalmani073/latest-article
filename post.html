<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Travel Blog | Global Travel Guide</title>

<meta name="description" content="Travel visa guides and trip planning tips for Indian travelers.">
<meta name="robots" content="index, follow">

<link rel="canonical" id="canonicalTag" href="">

<meta property="og:title" id="ogTitle" content="">
<meta property="og:description" id="ogDesc" content="">
<meta property="og:type" content="article">
<meta property="og:url" id="ogUrl" content="">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root { --primary-color:#ff5722; --dark-color:#1a1a1a; }
body{font-family:'Poppins',sans-serif;line-height:1.8;color:#444;margin:0;background:#f9f9f9;}
.nav{background:white;padding:15px 8%;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
.container{max-width:800px;margin:40px auto;background:white;padding:40px;border-radius:15px;}
h1{color:var(--dark-color);font-size:32px;margin-bottom:10px;}
.meta{font-size:14px;color:#888;border-bottom:1px solid #eee;padding-bottom:20px;margin-bottom:30px;}
.content img{max-width:100%;border-radius:10px;margin:20px 0;}
</style>
</head>

<body>

<div class="nav">
<a href="/latest-article/" style="text-decoration:none;font-weight:bold;color:var(--primary-color);">‚Üê Back to Home</a>
</div>

<div class="container" id="full-post">
<p style="text-align:center;">Loading your travel story...</p>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

const firebaseConfig = {
apiKey:"AIzaSyCBSTMljE8h9sa1IldRcuKbaKp84t5hx9s",
authDomain:"latest-article.firebaseapp.com",
projectId:"latest-article",
appId:"1:222132959003:web:a329d719efb6cf7c105be"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

const urlParams=new URLSearchParams(window.location.search);
const postId=urlParams.get('id');

async function loadPost(){
if(!postId){
document.getElementById('full-post').innerHTML="Post not found.";
return;
}

const docRef=doc(db,"user_blogs",postId);
const docSnap=await getDoc(docRef);

if(docSnap.exists()){
const data=docSnap.data();

let textContent=data.content.replace(/<[^>]*>?/gm,'').substring(0,150);

document.title=data.title+" | Global Travel Guide";

document.querySelector("meta[name='description']").setAttribute("content",textContent);

document.getElementById("canonicalTag").href=window.location.href;
document.getElementById("ogTitle").content=data.title;
document.getElementById("ogDesc").content=textContent;
document.getElementById("ogUrl").content=window.location.href;

document.getElementById('full-post').innerHTML=`
<span style="color:var(--primary-color);font-weight:bold;text-transform:uppercase;font-size:12px;">
${data.category?data.category.replace('-',' '):'Travel Story'}
</span>

<h1>${data.title}</h1>

<div class="meta">
By <b>${data.author}</b> |
Published on ${new Date().toLocaleDateString()}
</div>

<div class="content">${data.content}</div>
`;

let schema={
"@context":"https://schema.org",
"@type":"BlogPosting",
"headline":data.title,
"description":textContent,
"author":{"@type":"Person","name":data.author},
"datePublished":new Date().toISOString(),
"mainEntityOfPage":{"@type":"WebPage","@id":window.location.href}
};

let script=document.createElement('script');
script.type='application/ld+json';
script.text=JSON.stringify(schema);
document.head.appendChild(script);

}else{
document.getElementById('full-post').innerHTML="Post does not exist.";
}
}
loadPost();
</script>

</body>
</html>
